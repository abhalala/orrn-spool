<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50" id="test-print-modal">
  <div class="bg-white rounded-lg shadow-xl w-full max-w-lg mx-4">
    <div class="p-4 border-b flex justify-between items-center">
      <h3 class="text-lg font-semibold text-gray-900">Test Print - {{ .Printer.Name }}</h3>
      <button onclick="document.getElementById('test-print-modal').remove()" class="text-gray-400 hover:text-gray-600 text-2xl leading-none">&times;</button>
    </div>
    
    <form id="test-form" 
          hx-post="/api/printers/{{ .Printer.ID }}/test"
          hx-target="#test-result"
          hx-swap="innerHTML">
      <div class="p-4 space-y-4">
        <div>
          <label for="template" class="block text-sm font-medium text-gray-700 mb-1">Template</label>
          <select id="template" 
                  name="template_id" 
                  class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"
                  hx-get="/api/templates/{{ `{{ .value }}` }}/variables"
                  hx-target="#variables-form"
                  hx-trigger="change">
            <option value="">Select a template...</option>
            {{ range .Templates }}
            <option value="{{ .ID }}">{{ .Name }}</option>
            {{ end }}
          </select>
        </div>
        
        <div id="variables-form" class="space-y-3">
          <p class="text-sm text-gray-500 italic">Select a template to see available variables</p>
        </div>

        <div id="test-result"></div>
      </div>
      
      <div class="p-4 border-t bg-gray-50 rounded-b-lg flex justify-end space-x-3">
        <button type="button" 
                onclick="document.getElementById('test-print-modal').remove()" 
                class="px-4 py-2 text-gray-700 hover:text-gray-900 font-medium transition-colors">
          Cancel
        </button>
        <button type="submit" 
                class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium transition-colors flex items-center">
          <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"/>
          </svg>
          Print Test
        </button>
      </div>
    </form>
  </div>
</div>
